(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[323],{7869:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/link/[id]",function(){return t(3831)}])},8418:function(e,n,t){"use strict";function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function o(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(u){l=!0,o=u}finally{try{a||null==t.return||t.return()}finally{if(l)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return r(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return r(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.default=void 0;var i,a=(i=t(7294))&&i.__esModule?i:{default:i},l=t(6273),u=t(387),c=t(7190);var s={};function f(e,n,t,r){if(e&&l.isLocalURL(n)){e.prefetch(n,t,r).catch((function(e){0}));var o=r&&"undefined"!==typeof r.locale?r.locale:e&&e.locale;s[n+"%"+t+(o?"%"+o:"")]=!0}}var d=function(e){var n,t=!1!==e.prefetch,r=u.useRouter(),i=a.default.useMemo((function(){var n=o(l.resolveHref(r,e.href,!0),2),t=n[0],i=n[1];return{href:t,as:e.as?l.resolveHref(r,e.as):i||t}}),[r,e.href,e.as]),d=i.href,p=i.as,v=e.children,y=e.replace,h=e.shallow,g=e.scroll,b=e.locale;"string"===typeof v&&(v=a.default.createElement("a",null,v));var m=(n=a.default.Children.only(v))&&"object"===typeof n&&n.ref,x=o(c.useIntersection({rootMargin:"200px"}),2),w=x[0],j=x[1],k=a.default.useCallback((function(e){w(e),m&&("function"===typeof m?m(e):"object"===typeof m&&(m.current=e))}),[m,w]);a.default.useEffect((function(){var e=j&&t&&l.isLocalURL(d),n="undefined"!==typeof b?b:r&&r.locale,o=s[d+"%"+p+(n?"%"+n:"")];e&&!o&&f(r,d,p,{locale:n})}),[p,d,j,b,t,r]);var I={ref:k,onClick:function(e){n.props&&"function"===typeof n.props.onClick&&n.props.onClick(e),e.defaultPrevented||function(e,n,t,r,o,i,a,u){("A"!==e.currentTarget.nodeName||!function(e){var n=e.currentTarget.target;return n&&"_self"!==n||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&l.isLocalURL(t))&&(e.preventDefault(),null==a&&r.indexOf("#")>=0&&(a=!1),n[o?"replace":"push"](t,r,{shallow:i,locale:u,scroll:a}))}(e,r,d,p,y,h,g,b)},onMouseEnter:function(e){n.props&&"function"===typeof n.props.onMouseEnter&&n.props.onMouseEnter(e),l.isLocalURL(d)&&f(r,d,p,{priority:!0})}};if(e.passHref||"a"===n.type&&!("href"in n.props)){var E="undefined"!==typeof b?b:r&&r.locale,N=r&&r.isLocaleDomain&&l.getDomainLocale(p,E,r&&r.locales,r&&r.domainLocales);I.href=N||l.addBasePath(l.addLocale(p,E,r&&r.defaultLocale))}return a.default.cloneElement(n,I)};n.default=d},7190:function(e,n,t){"use strict";function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function o(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(u){l=!0,o=u}finally{try{a||null==t.return||t.return()}finally{if(l)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return r(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return r(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Object.defineProperty(n,"__esModule",{value:!0}),n.useIntersection=function(e){var n=e.rootRef,t=e.rootMargin,r=e.disabled||!l,c=i.useRef(),s=o(i.useState(!1),2),f=s[0],d=s[1],p=o(i.useState(n?n.current:null),2),v=p[0],y=p[1],h=i.useCallback((function(e){c.current&&(c.current(),c.current=void 0),r||f||e&&e.tagName&&(c.current=function(e,n,t){var r=function(e){var n=e.rootMargin||"",t=u.get(n);if(t)return t;var r=new Map,o=new IntersectionObserver((function(e){e.forEach((function(e){var n=r.get(e.target),t=e.isIntersecting||e.intersectionRatio>0;n&&t&&n(t)}))}),e);return u.set(n,t={id:n,observer:o,elements:r}),t}(t),o=r.id,i=r.observer,a=r.elements;return a.set(e,n),i.observe(e),function(){a.delete(e),i.unobserve(e),0===a.size&&(i.disconnect(),u.delete(o))}}(e,(function(e){return e&&d(e)}),{root:v,rootMargin:t}))}),[r,v,t,f]);return i.useEffect((function(){if(!l&&!f){var e=a.requestIdleCallback((function(){return d(!0)}));return function(){return a.cancelIdleCallback(e)}}}),[f]),i.useEffect((function(){n&&y(n.current)}),[n]),[h,f]};var i=t(7294),a=t(9311),l="undefined"!==typeof IntersectionObserver;var u=new Map},3831:function(e,n,t){"use strict";t.r(n);var r=t(4051),o=t.n(r),i=t(5893),a=t(9008),l=t(1163),u=t(7294),c=t(5170),s=t(2760);function f(e,n,t,r,o,i,a){try{var l=e[i](a),u=l.value}catch(c){return void t(c)}l.done?n(u):Promise.resolve(u).then(r,o)}function d(e){return function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){f(i,r,o,a,l,"next",e)}function l(e){f(i,r,o,a,l,"throw",e)}a(void 0)}))}}n.default=function(){var e=(0,l.useRouter)(),n=e.query.id,t=(0,u.useState)(),r=t[0],f=t[1],p=(0,u.useState)(),v=p[0],y=p[1],h=(0,u.useState)(),g=h[0],b=h[1],m=(0,u.useState)(),x=m[0],w=m[1],j=(0,u.useState)(!0),k=j[0],I=j[1],E=((0,s._3)({variables:{id:Number.parseInt(null!==n&&void 0!==n?n:"")},onCompleted:function(e){var n,t,r,o,i;if(!(null===(n=e.findLinkById)||void 0===n?void 0:n.id)||!(null===(t=e.findLinkById)||void 0===t?void 0:t.type))throw Error("Singlelink: DB model invalid.");I(!1),f(null!==(r=e.findLinkById.label)&&void 0!==r?r:""),y(null!==(o=e.findLinkById.content)&&void 0!==o?o:""),b(null!==(i=e.findLinkById.type)&&void 0!==i?i:"vanilla"),w(e.findLinkById.position)}}),(0,s.s2)({onCompleted:function(e){if(I(!1),document.getElementById("singlelink-preview")){var n=document.getElementById("singlelink-preview");n.src=n.src}}})),N=(0,s.m4)({onCompleted:function(n){e.push("/dashboard/")}}),C=function(){var e=d(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(void 0===x||x<0)&&g&&n){e.next=2;break}throw Error("Cannot save without position, type, or id.");case 2:I(!0),E[0]({variables:{label:r,content:v,position:x,type:g,id:Number.parseInt(n)}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=d(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(!0),N[0]({variables:{id:Number.parseInt(n)}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.jsxs)(c.Z,{children:[(0,i.jsx)(a.default,{children:(0,i.jsx)("title",{children:"Edit link | BRAND"})}),(0,i.jsx)("h1",{className:"h1",children:"Edit link"}),k?(0,i.jsx)("div",{className:"p-3 text-gray-600",children:"Loading, please wait..."}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex flex-col space-y-2 mb-6",children:[(0,i.jsx)("label",{className:"font-semibold text-lg text-gray-800",children:"Label"}),(0,i.jsx)("input",{onChange:function(e){return f(e.target.value)},value:null!==r&&void 0!==r?r:"",className:"px-5 py-3 rounded-lg border border-gray-200 w-full bg-white focus:ring-4 focus:ring-opacity-50 focus:ring-indigo-600 outline-0 ring-offset-2 focus:border-gray-1",type:"text",placeholder:"e.g. My Instagram profile"})]}),(0,i.jsxs)("div",{className:"flex flex-col space-y-2 mb-6",children:[(0,i.jsx)("label",{className:"font-semibold text-lg text-gray-800",children:"Type"}),(0,i.jsxs)("select",{onChange:function(e){return b(e.target.value)},value:g,className:"px-5 py-3 rounded-lg border border-gray-200 w-full bg-white focus:ring-4 focus:ring-opacity-50 focus:ring-indigo-600 outline-0 ring-offset-2 focus:border-gray-1",children:[(0,i.jsx)("option",{value:"vanilla",children:"Vanilla"}),(0,i.jsx)("option",{value:"image",children:"Image"}),(0,i.jsx)("option",{value:"youtube",children:"Youtube"}),(0,i.jsx)("option",{value:"text",children:"Text"}),(0,i.jsx)("option",{value:"avatar",children:"Avatar"}),(0,i.jsx)("option",{value:"html",children:"HTML/Code embed"})]})]}),(0,i.jsxs)("div",{className:"flex flex-col space-y-2 mb-6",children:[(0,i.jsx)("label",{className:"font-semibold text-lg text-gray-800",children:"Content URL"}),(0,i.jsx)("input",{onChange:function(e){return y(e.target.value)},value:null!==v&&void 0!==v?v:"",className:"px-5 py-3 rounded-lg border border-gray-200 w-full bg-white focus:ring-4 focus:ring-opacity-50 focus:ring-indigo-600 outline-0 ring-offset-2 focus:border-gray-1",type:"text",placeholder:"e.g. https://instagram.com/neutroncreative"})]}),(0,i.jsx)("button",{onClick:function(){return C()},className:"px-8 py-4 bg-indigo-600 w-full text-white font-semibold rounded-xl hover:bg-indigo-700 mb-4",children:"Save changes"}),(0,i.jsx)("button",{onClick:function(){return L()},className:"px-8 py-4 bg-red-100 w-full text-red-600 border border-red-600 font-semibold rounded-xl hover:bg-red-600 hover:text-white",children:"Delete link"})]})]})}},1664:function(e,n,t){e.exports=t(8418)},1163:function(e,n,t){e.exports=t(387)}},function(e){e.O(0,[653,376,774,888,179],(function(){return n=7869,e(e.s=n);var n}));var n=e.O();_N_E=n}]);